---
import type { SectionData } from "../lib/data";

interface Props {
  sections: SectionData[];
  word: string;
}

const { sections, word } = Astro.props;
---

<nav
  id="override-nav"
  class="fixed top-6 left-1/2 -translate-x-1/2 z-50 w-[90%] md:w-auto px-8 py-4 rounded-full backdrop-blur-md bg-white/30 border border-white/50 shadow-lg transition-all duration-500 opacity-0 pointer-events-none translate-y-[-20px]"
>
  <div class="flex items-center gap-4">
    <span
      id="nav-word"
      class="text-2xl md:text-3xl font-black text-rose-600 select-none tracking-tighter"
    >
      {word}
    </span>
  </div>
</nav>

<script is:inline define:vars={{ sections }}>
  const nav = document.getElementById("override-nav");

  const updateNav = () => {
    const scrollPos = window.scrollY;
    const windowHeight = window.innerHeight;

    // Show nav after scrolling past the hero
    if (scrollPos > windowHeight * 0.3) {
      nav.classList.remove(
        "opacity-0",
        "pointer-events-none",
        "translate-y-[-20px]",
      );
      nav.classList.add("opacity-100", "pointer-events-auto", "translate-y-0");
    } else {
      nav.classList.remove(
        "opacity-100",
        "pointer-events-auto",
        "translate-y-0",
      );
      nav.classList.add(
        "opacity-0",
        "pointer-events-none",
        "translate-y-[-20px]",
      );
    }
  };

  window.addEventListener("scroll", updateNav);
  window.addEventListener("resize", updateNav);
  updateNav();
</script>

<style>
  #nav-word {
    font-family: var(--font-headline);
  }
</style>
